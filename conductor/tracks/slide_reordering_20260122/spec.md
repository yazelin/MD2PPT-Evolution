# 規格說明書 (spec.md) - 投影片拖拽重排 (Drag & Drop Reordering)

## 1. 概述 (Overview)
目前的 `MD2PPT-Evolution` 導覽側欄僅能用於跳轉頁面。本功能旨在實作一套直覺的拖拽系統，讓使用者能透過「拖移投影片縮圖」來改變簡報順序。系統將自動處理 Markdown 原始碼的切割與重組，實現視覺操作與內容代碼的同步更新。

## 2. 功能需求 (Functional Requirements)

### 2.1 拖拽互動 (Interaction)
- **支援區域**：導覽側欄 (Sidebar)、編輯器預覽區 (Preview Pane)、演講者主控台縮圖清單 (Presenter Console)。
- **觸發點**：所有投影片左上角均需新增一個 **專用拖拽把手 (Drag Handle)**。
- **視覺反饋**：
    - **佔位符 (Placeholder)**：顯示目標插入位置的虛線框。
    - **縮圖隨游標 (Ghost Image)**：拖動時顯示半透明的縮圖跟隨游標。
    - **自動捲動 (Auto-scroll)**：拖至視窗邊緣時，清單會自動捲動。

### 2.2 內容處理算法 (Markdown Sync Logic)
- **精確切割**：以 `===` (分頁符號) 為基準，將 Markdown 原始碼切割為獨立的投影片區塊。
- **全域設定保護**：
    - Markdown 檔案最頂端的 YAML Frontmatter (全域設定) 必須**固定在檔案頭部**。
    - 即使第一張投影片被拖往後方，其內容會移動，但全域設定區塊保留在第一行。
- **即時回寫**：操作完成（放開游標）後，立即更新全域的 `editorContent` 狀態。

### 2.3 UI/UX 增強
- **動畫效果**：投影片移動時需有平滑的過渡動畫 (Layout Transitions)。
- **行動端支援**：在手機遙控或觸控設備上也能進行基本的操作。

## 3. 非功能需求 (Non-Functional Requirements)
- **效能**：Markdown 重組算法需在 100ms 內完成，避免大檔案編輯時產生延遲。
- **強健性**：確保分頁符號 `===` 周圍的空行在重組後維持正確格式，避免解析錯誤。

## 4. 驗收標準 (Acceptance Criteria)
1. 在側欄拖動第 2 頁到第 4 頁位置後，Markdown 編輯器的內容順序同步變更。
2. 拖動第一頁到最後一頁，全域主題 (`theme: ...`) 依然正確套用。
3. 預覽區的拖拽把手能正常工作，且不干擾投影片內的文字選取或點擊動作。
4. 在演講者主控台調整順序，應能即時同步至觀眾視窗（透過現有的同步機制）。

## 5. 超出範圍 (Out of Scope)
- 跨簡報檔案的投影片拖拽。
- 撤銷/重做 (Undo/Redo) 的專屬 UI 按鈕（依賴現有編輯器的 Ctrl+Z）。
